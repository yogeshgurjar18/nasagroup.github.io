<!DOCTYPE html>
<html>
<head>
  <title>NASA | Restricted Access</title>

  <style>
    body{
      background:radial-gradient(circle at top, #300000, #000);
      color:white;
      font-family:Arial, sans-serif;
      text-align:center;
      margin:0;
    }

    h1{color:red;font-size:40px;letter-spacing:3px}
    h2{color:orange}
    p{font-size:16px}

    .box{
      border:2px solid red;
      box-shadow:0 0 15px red;
      border-radius:10px;
      padding:20px;
      margin:20px auto;
      width:90%;
      max-width:500px;
      background:rgba(0,0,0,0.7);
    }

    input{
      padding:10px;
      width:220px;
      margin:6px;
      background:black;
      border:1px solid red;
      color:white;
    }

    button{
      padding:10px 20px;
      background:red;
      color:white;
      border:none;
      cursor:pointer;
      margin:6px;
      box-shadow:0 0 8px red;
    }

    .back{
      position:fixed;
      top:10px;
      left:10px;
      font-size:12px;
      padding:5px 10px;
    }

    a{color:cyan;text-decoration:none}

    .hidden{display:none}

    .blink{
      animation:blink 1.2s infinite;
      letter-spacing:2px;
      font-size:13px;
      color:red;
    }

    @keyframes blink{
      0%{opacity:1}
      50%{opacity:.3}
      100%{opacity:1}
    }
  </style>
</head>

<body>

<button class="back hidden" id="backBtn" onclick="goBack()">⬅ BACK</button>

<!-- ========== FIRST PAGE ========== -->
<div class="box" id="first">
  <h2>⚠ RESTRICTED ACCESS</h2>
  <p class="blink">AUTHORIZED AGENTS ONLY</p>
  <button onclick="openMember()">MEMBERS LOGIN</button><br>
  <button onclick="openAdmin()">ADMIN LOGIN</button><br>
  <button onclick="openJoin()">JOIN NASA</button>
</div>

<!-- ========== MEMBER LOGIN ========== -->
<div class="box hidden" id="memberLogin">
  <h2>Members Login</h2>
  <input id="mu" placeholder="Username"><br>
  <input id="mp" type="password" placeholder="Password"><br>
  <button onclick="memberLogin()">LOGIN</button>
</div>

<!-- ========== ADMIN LOGIN ========== -->
<div class="box hidden" id="adminLogin">
  <h2>Admin Login</h2>
  <input id="au" placeholder="Username"><br>
  <input id="ap" type="password" placeholder="Password"><br>
  <button onclick="adminLogin()">LOGIN</button>
</div>

<!-- ========== JOIN FORM ========== -->
<div class="box hidden" id="joinForm">
  <h2>Join NASA</h2>
  <input id="jname" placeholder="Your Name"><br>
  <input id="jinsta" placeholder="Instagram Link"><br>
  <button onclick="sendReq()">SEND REQUEST</button>
  <p id="joinMsg"></p>
</div>

<!-- ========== MEMBER PAGE ========== -->
<div class="hidden" id="memberPage">
  <h1>WELCOME AGENTS</h1>
  <h2>NASA – Notorious Agents of Subversive Act</h2>
  <p>Brotherhood • Loyalty • Power • Respect</p>

  <div class="box">
    <h2>Our Members</h2>
    <div id="members"></div>
  </div>
</div>

<!-- ========== ADMIN PAGE ========== -->
<div class="hidden" id="adminPage">
  <h1>ADMIN PANEL</h1>
  <div class="box">
    <h2>Join Requests</h2>
    <div id="reqs"></div>
  </div>
</div>

<!-- ========== FIREBASE ========== -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
/* ELEMENTS */
const first = document.getElementById("first");
const memberLoginBox = document.getElementById("memberLogin");
const adminLoginBox = document.getElementById("adminLogin");
const joinForm = document.getElementById("joinForm");
const memberPage = document.getElementById("memberPage");
const adminPage = document.getElementById("adminPage");
const backBtn = document.getElementById("backBtn");

const mu = document.getElementById("mu");
const mp = document.getElementById("mp");
const au = document.getElementById("au");
const ap = document.getElementById("ap");
const jname = document.getElementById("jname");
const jinsta = document.getElementById("jinsta");
const joinMsg = document.getElementById("joinMsg");
const membersDiv = document.getElementById("members");
const reqsDiv = document.getElementById("reqs");

/* FIREBASE */
firebase.initializeApp({
  apiKey:"AIzaSyAv62hu_uVwtB0xt16fNXkMYo0zbjmc-iI",
  authDomain:"yogesh-1287e.firebaseapp.com",
  databaseURL:"https://yogesh-1287e-default-rtdb.firebaseio.com",
  projectId:"yogesh-1287e"
});
var db = firebase.database();

/* UI */
function hideAll(){
  first.classList.add("hidden");
  memberLoginBox.classList.add("hidden");
  adminLoginBox.classList.add("hidden");
  joinForm.classList.add("hidden");
  memberPage.classList.add("hidden");
  adminPage.classList.add("hidden");
}

function goBack(){
  hideAll();
  backBtn.classList.add("hidden");
  first.classList.remove("hidden");
}

function openMember(){ hideAll(); backBtn.classList.remove("hidden"); memberLoginBox.classList.remove("hidden"); }
function openAdmin(){ hideAll(); backBtn.classList.remove("hidden"); adminLoginBox.classList.remove("hidden"); }
function openJoin(){ hideAll(); backBtn.classList.remove("hidden"); joinForm.classList.remove("hidden"); }

/* LOGIN */
function memberLogin(){
  if(mu.value==="nasa" && mp.value==="agent123"){
    hideAll();
    backBtn.classList.remove("hidden");
    memberPage.classList.remove("hidden");
    loadMembers();
  } else alert("ACCESS DENIED");
}

function adminLogin(){
  if(au.value==="yogesh" && ap.value==="90351396"){
    hideAll();
    backBtn.classList.remove("hidden");
    adminPage.classList.remove("hidden");
    loadRequests();
  } else alert("ACCESS DENIED");
}

/* JOIN */
function sendReq(){
  if(!jname.value || !jinsta.value) return;
  db.ref("requests").push({name:jname.value, insta:jinsta.value});
  joinMsg.innerHTML="REQUEST SENT ✅";
  jname.value=""; jinsta.value="";
}

/* ADMIN */
function loadRequests(){
  db.ref("requests").on("value",snap=>{
    reqsDiv.innerHTML="";
    snap.forEach(c=>{
      let r=c.val();
      reqsDiv.innerHTML+=`
      <p><b>${r.name}</b><br>
      <a href="${r.insta}" target="_blank">Instagram</a><br>
      <button onclick="approve('${c.key}','${r.name}','${r.insta}')">APPROVE</button>
      <button onclick="reject('${c.key}')">REJECT</button></p>`;
    });
  });
}

function approve(id,name,insta){
  db.ref("members").push({name,insta});
  db.ref("requests/"+id).remove();
}

function reject(id){
  db.ref("requests/"+id).remove();
}

/* MEMBERS */
function loadMembers(){
  db.ref("members").on("value",snap=>{
    membersDiv.innerHTML="";
    snap.forEach(c=>{
      let m=c.val();
      membersDiv.innerHTML+=`
      <p><b>${m.name}</b><br>
      <a href="${m.insta}" target="_blank">Instagram</a></p>`;
    });
  });
}
</script>

</body>
</html>
